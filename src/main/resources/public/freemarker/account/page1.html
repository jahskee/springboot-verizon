<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Verizon Labs - Member</title>

    <!-- Bootstrap -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/font-awesome.min.css">
	<link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">      
	<link href="/css/main.css" rel="stylesheet">
	 <link href="/css/responsive.css" rel="stylesheet">
	 <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->       
  
 
    <!-- Fine Uploader Gallery CSS file
    ====================================================================== -->
    <link href="/assets/s3.fine-uploader/fine-uploader-gallery.css" rel="stylesheet">

    <!-- Fine Uploader S3 JS file
    ====================================================================== -->
    <script src="/assets/s3.fine-uploader/s3.fine-uploader.js"></script>

    <!-- Fine Uploader Customized Gallery template
    ====================================================================== -->
    <script type="text/template" id="qq-template-s3">
        <div class="qq-uploader-selector qq-uploader qq-gallery" qq-drop-area-text="Drop files here">
            <div class="qq-total-progress-bar-container-selector qq-total-progress-bar-container">
                <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar"></div>
            </div>
            <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>
                <span class="qq-upload-drop-area-text-selector"></span>
            </div>
            <div class="qq-upload-button-selector qq-upload-button" style="width:200px">
                <div>Upload Movie to S3</div>
            </div>
            <span class="qq-drop-processing-selector qq-drop-processing">
                <span>Processing dropped files...</span>
                <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>
            </span>
            <ul class="qq-upload-list-selector qq-upload-list" role="region" aria-live="polite" aria-relevant="additions removals">
                <li>
                    <span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>
                    <div class="qq-progress-bar-container-selector qq-progress-bar-container">
                        <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>
                    </div>
                    <span class="qq-upload-spinner-selector qq-upload-spinner"></span>
                    <div class="qq-thumbnail-wrapper">
                        <a class="preview-link" target="_blank">
                            <img class="qq-thumbnail-selector" qq-max-size="120" qq-server-scale>
                        </a>
                    </div>
                    <button type="button" class="qq-upload-cancel-selector qq-upload-cancel">X</button>
                    <button type="button" class="qq-upload-retry-selector qq-upload-retry">
                        <span class="qq-btn qq-retry-icon" aria-label="Retry"></span>
                        Retry
                    </button>

                    <div class="qq-file-info">
                        <div class="qq-file-name">
                            <span class="qq-upload-file-selector qq-upload-file"></span>
                            <span class="qq-edit-filename-icon-selector qq-edit-filename-icon" aria-label="Edit filename"></span>
                        </div>
                        <input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">
                        <span class="qq-upload-size-selector qq-upload-size"></span>
							 <br>Res:<span id="vidres">1920x1080</span>
							<br>
							Dur:<span id="vidduration">9mins</span>


                        <button type="button" class="qq-btn qq-upload-delete-selector qq-upload-delete">
                            <span class="qq-btn qq-delete-icon" aria-label="Delete"></span>
                        </button>
                        <button type="button" class="qq-btn qq-upload-pause-selector qq-upload-pause">
                            <span class="qq-btn qq-pause-icon" aria-label="Pause"></span>
                        </button>
                        <button type="button" class="qq-btn qq-upload-continue-selector qq-upload-continue">
                            <span class="qq-btn qq-continue-icon" aria-label="Continue"></span>
                        </button>
                    </div>
                </li>
            </ul>

            <dialog class="qq-alert-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">Close</button>
                </div>
            </dialog>

            <dialog class="qq-confirm-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">No</button>
                    <button type="button" class="qq-ok-button-selector">Yes</button>
                </div>
            </dialog>

            <dialog class="qq-prompt-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <input type="text">
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">Cancel</button>
                    <button type="button" class="qq-ok-button-selector">Ok</button>
                </div>
            </dialog>
        </div>
    </script>

    <style>
        #fine-uploader-s3 .preview-link {
            display: block;
            height: 100%;
            width: 100%;
        }
        
      img.qq-thumbnail-selector.qq-hide {
		    background-image: url(/images/videoicon.jpg);
		    width: 100px;
		    height: 100px;
	  }
	  
	  
	  #fine-uploader-s3 > div > div > ul > li > div.qq-file-info > button.qq-btn.qq-upload-delete-selector.qq-upload-delete > span {
	  	display: none;
	  }
	  
	#fine-uploader-s3 > div > div > ul > li {
		margin: 0;
	    height: 250px;
	}
	
	.qq-upload-success{
		margin: 30px;
	}
    </style>

 

 
  </head>
  <body class="homepage">   
	<header id="header">
        <nav class="navbar navbar-fixed-top" role="banner">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                     <a class="navbar-brand" href="index.html">Verizon Labs</a>
                </div>
				
                  <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        <li><a href="/index.html">Home</a></li>                        
                        <li><a href="/about-us.html"> About Us</a>
                        <li><a href="/services.html">Services</a></li>
                        <li><a href="/portfolio.html">Portfolio</a></li>
                        <li><a href="/blog.html">Blog</a></li> 
                        <li><a href="/contact-us.html">Contact</a></li>        
                        <li class="active"><a href="/account/page1">My Account</a></li>                
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
		
    </header><!--/header-->
	
	<section id="services" class="service-item">
	   <div class="container">
            <div class="center wow fadeInDown">
                <h2>Hello ${username}!</h2>
                <a href="/logout">Log Out</a>
             
                
            </div>
           
        </div><!--/.container-->
    </section><!--/#services-->

	
	<section id="feature" class="transparent-bg">
		<div class="container">
	     <!-- Fine Uploader DOM Element
    ====================================================================== -->
    <div id="fine-uploader-s3"></div>

    <!-- Your code to create an instance of Fine Uploader and bind to the DOM/template
    ====================================================================== -->
    <script>
  	   "use strict";
  	   
  	   var issubmit=true;
  	   
  	   (function(){
  		  var s3Uploader = new qq.s3.FineUploader({
              debug: true,
              element: document.getElementById('fine-uploader-s3'),
              template: 'qq-template-s3',
              request: {
                  endpoint: 'verizonlabs.s3.amazonaws.com',
                  accessKey: "AKIAIKM5VEIJKYNST5OQ"
              },
              credentials: {
              	accessKey: "AKIAIKM5VEIJKYNST5OQ",
              	secretKey: "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",
              	expiration: "2018-01-01"
              },
              objectProperties: {
                  bucket: 'verizonlabs',
                  host: 's3.amazonaws.com' // only needed for version 4 signatures
              }, 
              validation: {
                  allowedExtensions: ['mp4'],
                  itemLimit: 5
                 // sizeLimit: 30000000
                
              },
              dragAndDrop: {
                  extraDropzones: [],
                  reportDirectoryPaths: true
              },
              cors: {
                  expected: true
              },
              chunking: {
                  enabled: true
              },
              resume: {
                  enabled: true
              },
              deleteFile: {
                  enabled: true,
                  method: "POST",
                  endpoint: "/s3/dodelete"
              },          
              thumbnails: {
                  placeholders: {
                      notAvailablePath: "/images/videoicon.jpg",
                      waitingPath: "/images/videoicon.png"
                  }
              },
              
              formatFileName: function(filename) {
                  return filename;
              },
              callbacks: {
              onComplete: function(id, name, response) {
            	   
                      var previewLink = qq(this.getItemByFileId(id)).getByClass('preview-link')[0];
                      var uuid = this.getUuid(id);
                  	  var file = this.getFile(id);  
                  	//  alert(id);
                  	
                      console.log("File "+name+" renamed to "+uuid);
                      if (response.success) {
                          previewLink.setAttribute("href", response.tempLink)
                      }
                     
                      var lambda = new AWS.Lambda({apiVersion: '2015-03-31'});
                   	var reader = new FileReader();                  	 
                  	var video = document.createElement("video");   
  					
                  	
  			     	reader.onload = function(){
                  		video.src = reader.result;
  						video.autoplay = false;
  						video.muted = true;
  						video.preload = "metadata"; //we only need the metadata, optimizing resource usage.  						  						
                  	};
                  	
                 
  					video.onloadedmetadata = function(){
  							if(video.duration > 600) {
  								alert("Video duration limit of 10mins was exceeded, file will be removed");
  								deleteS3File(uuid+".mp4");
  								var elem = document.querySelector('.qq-file-id-'+id);
  								elem.parentNode.removeChild(elem);
  								
  							}
  					};				
  				
  											
  					reader.readAsDataURL(file);			 
  				  
                      
              },
                  onSubmit: function(id, name){ 
                	 
                	  // this is where the checking of video information  is supposed to be before uploading
                	  // but still fixing this got no more time.
                  }
                 
              }
              
           
          });
        
  	   })();
      
    </script>
		
		</div><!--/.container-->
	</section><!--/#feature-->


<section id="bottom">
	<div class="container wow fadeInDown" data-wow-duration="1000ms" data-wow-delay="600ms">
		<div class="row">
			<div class="col-md-3 col-sm-6">
				<div class="widget">
					<h3>Company</h3>
					<ul>
						<li><a href="#">About us</a></li>
						<li><a href="#">We are hiring</a></li>
						<li><a href="#">Meet the team</a></li>
						<li><a href="#">Copyright</a></li>                           
					</ul>
				</div>    
			</div><!--/.col-md-3-->

                <div class="col-md-3 col-sm-6">
                    <div class="widget">
                        <h3>Support</h3>
                        <ul>
                            <li><a href="#">Faq</a></li>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">Forum</a></li>
                            <li><a href="#">Documentation</a></li>                          
                        </ul>
                    </div>    
                </div><!--/.col-md-3-->

                <div class="col-md-3 col-sm-6">
                    <div class="widget">
                        <h3>Developers</h3>
                        <ul>
                            <li><a href="#">Web Development</a></li>
                            <li><a href="#">SEO Marketing</a></li>
                            <li><a href="#">Theme</a></li>
                            <li><a href="#">Development</a></li>
                        </ul>
                    </div>    
                </div><!--/.col-md-3-->

                <div class="col-md-3 col-sm-6">
                    <div class="widget">
                        <h3>Our Partners</h3>
                        <ul>
                            <li><a href="#">Adipisicing Elit</a></li>
                            <li><a href="#">Eiusmod</a></li>
                            <li><a href="#">Tempor</a></li>
                            <li><a href="#">Veniam</a></li>                           
                        </ul>
                    </div>    
                </div><!--/.col-md-3-->
            </div>
        </div>
    </section><!--/#bottom-->
	
	<div class="top-bar">
		<div class="container">
			<div class="row">
			    <div class="col-lg-12">
				   <div class="social">
						<ul class="social-share">
							<li><a href="#"><i class="fa fa-facebook"></i></a></li>
							<li><a href="#"><i class="fa fa-twitter"></i></a></li>
							<li><a href="#"><i class="fa fa-linkedin"></i></a></li> 
							<li><a href="#"><i class="fa fa-dribbble"></i></a></li>
							<li><a href="#"><i class="fa fa-skype"></i></a></li>
						</ul>
				   </div>
                </div>
			</div>
		</div><!--/.container-->
	</div><!--/.top-bar-->
	
	<footer id="footer" class="midnight-blue">
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    &copy; 2015 <a target="_blank" href="http://bootstraptaste.com/" title="Free Twitter Bootstrap WordPress Themes and HTML templates">bootstraptaste</a>. All Rights Reserved.
                </div>
                <!-- 
                    All links in the footer should remain intact. 
                    Licenseing information is available at: http://bootstraptaste.com/license/
                    You can buy this theme without footer links online at: http://bootstraptaste.com/buy/?theme=Gp
                -->
                <div class="col-sm-6">
                    <ul class="pull-right">
                        <li><a href="#">Home</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Faq</a></li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer><!--/#footer-->
	
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/js/jquery.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>   
    <script src="/js/wow.min.js"></script>
	<script src="/js/main.js"></script>
	<script src="https://sdk.amazonaws.com/js/aws-sdk-2.1.24.min.js"></script>
      <script type="text/javascript">
      
        AWS.config.update({
            accessKeyId : 'AKIAIKM5VEIJKYNST5OQ',
            secretAccessKey : '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'
        });
        AWS.config.region = 'us-east-1'; // ex: ap-southeast-1
        
       
		function deleteS3File(fileName) {
		    var bucketInstance = new AWS.S3();
		    var params = {Bucket: 'verizonlabs', Key: 'FILENAME'};
		    params.Key = fileName;
		    
		  
		    console.log(params.Key);
		    
		    bucketInstance.deleteObject(params, function (err, data) {
		        if (data) {
		            console.log("File deleted successfully");
		        }
		        else {
		            console.log("Check if you have sufficient permissions : "+err);
		        }
		    });
        }
        
        
    </script>
    
  

		
  </body>
</html>